(this["webpackJsonpdeliver-it-challenge"]=this["webpackJsonpdeliver-it-challenge"]||[]).push([[0],{133:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(11),o=t.n(c),l=t(32),i=t(10),s=t(177),m=t(178),u=t(44),d=t(159),b=t(42),p=t(156),f=t(163),g=t(28),v=t.n(g),E=t(39),k=t(30),h=t(75),j=t.n(h).a.create({baseURL:"http://5d8b64ad3c0aaf0014342c2a.mockapi.io/api/v1/"});function x(e,a){var t=Object(k.a)(e,function(){var e=Object(E.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get(t,a);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());return{data:t.data,error:t.error,mutate:t.mutate}}var C=t(33),I=t(180);function N(e){var a=e.className,t=e.initialPage,c=e.perPage,o=e.items,l=e.renderItem,i=e.keyExtractor,s=e.onChangePage,m=Object(r.useState)(Number.parseInt(t,10)),u=Object(C.a)(m,2),d=u[0],b=u[1],f=Object(r.useRef)(null);var g=Object(r.useMemo)((function(){return o.slice(c*(d-1),c*d)}),[o,d,c]),v=Object(r.useMemo)((function(){return Math.ceil(o.length/c)}),[o,c]);return n.a.createElement(p.a,{container:!0,className:a,ref:f,direction:"column",spacing:3,alignItems:"stretch",alignContent:"center"},g.map((function(e,a){return n.a.createElement(n.a.Fragment,{key:i({item:e,index:a})},l({item:e,index:a}))})),n.a.createElement(p.a,{item:!0,container:!0,alignItems:"center",justify:"center",spacing:1},n.a.createElement(I.a,{count:v,page:d,onChange:function(e,a){var t=d;b(a),s({previousPage:t,nextPage:a}),f.current.scrollIntoView({behavior:"smooth",block:"start"}),s(a)}})))}N.defaultProps={className:"",initialPage:"1",perPage:10,items:[],onChangePage:function(){}};var O=t(160),y=t(161),w=t(162),W=t(184),D=Object(d.a)((function(){return{collaboratorOverviewCard:{flex:1}}}));var S=n.a.memo((function(e){var a=e.id,t=e.name,r=e.avatar,c=e.role,o=D();return n.a.createElement(p.a,{item:!0,container:!0},n.a.createElement(O.a,{className:o.collaboratorOverviewCard},n.a.createElement(l.b,{to:"/collaborators/".concat(a),component:function(e){e.navigate;var a=e.children,t=e.href;return n.a.createElement(y.a,{href:t},a)}},n.a.createElement(w.a,{title:t,subheader:c,avatar:n.a.createElement(W.a,{src:r})}))))})),F=Object(d.a)((function(){return{container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},paginatorWrapper:{width:500},pageTitle:{fontSize:25,textAlign:"center",fontWeight:600,paddingBottom:15,flexGrow:0,flexShrink:1}}}));var A=function(){var e=x("collaborator").data,a=F(),t=function(){var e=Object(i.g)().search;return Object(u.parse)(e)}().page,r=Object(i.f)();return n.a.createElement("div",{className:a.container},n.a.createElement(b.a,{className:a.pageTitle},"Lista de colaboradores"),e?n.a.createElement("div",{className:a.paginatorWrapper},n.a.createElement(N,{initialPage:t,perPage:10,items:e,onChangePage:function(e){r.push({search:Object(u.stringify)({page:e})})},keyExtractor:function(e){var a=e.item;return String(a.id)},renderItem:function(e){var a=e.item;return n.a.createElement(S,{id:a.id,name:a.name,role:a.role,avatar:a.avatar})}})):n.a.createElement(p.a,{item:!0,container:!0,justify:"center"},n.a.createElement(f.a,null)))},L=t(59),P=t(51),B=t.n(P),z=t(134),R=t(166),T=t(182),M=t(173),H=t(183),V=t(181),J=t(174),Q=t(176),G=Object(d.a)((function(e){return{collaboratorDataWrapper:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},collaboratorDataTitle:{fontWeight:600,fontSize:18},collaboratorDataSeparator:{backgroundColor:"#3B4D68",width:"50%",height:e.spacing(.3),marginTop:e.spacing(1),marginBottom:e.spacing(1)},collaboratorDataValue:{fontSize:15}}}));var K=n.a.memo((function(e){var a=e.label,t=e.value,r=G();return n.a.createElement("div",{className:r.collaboratorDataWrapper},n.a.createElement(b.a,{variant:"body1",className:r.collaboratorDataTitle},a),n.a.createElement("div",{className:r.collaboratorDataSeparator}),n.a.createElement(b.a,{variant:"body2",className:r.collaboratorDataValue},t))})),U=t(81),q=t.n(U),X=t(164),Y=t(165),Z=t(167),$=t(168),_=Object(d.a)((function(e){return{cardContainer:{display:"flex",flexDirection:"column"},feedbackContentWrapper:{flex:"9.99 0.01"},feedbackActionsWrapper:{flex:"0.01 9.99",display:"flex",alignItems:"center",justifyContent:"space-between",padding:10},feedbackLikesWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},feedbackLikes:{marginRight:e.spacing(1)},feedbackActionIcon:{fontSize:19}}}));function ee(e){var a=e.className,t=e.id,r=e.collaboratorId,c=e.createdAt,o=e.message,l=e.like,i=e.onFeedbackLike,s=e.onFeedbackRemove,m=_(),u=B()().subtract(3e5,"milliseconds").isBefore(c);return n.a.createElement(O.a,{className:q()(m.cardContainer,a)},n.a.createElement(X.a,{className:m.feedbackContentWrapper},n.a.createElement(b.a,{variant:"caption"},o)),n.a.createElement(Y.a,{className:m.feedbackActionsWrapper},n.a.createElement("div",{className:m.feedbackLikesWrapper},n.a.createElement(b.a,{variant:"button",className:m.feedbackLikes},l),n.a.createElement(R.a,{size:"small",onClick:function(){i({feedbackId:t,collaboratorId:r,newLikesQuantity:l+1})}},n.a.createElement(Z.a,{className:m.feedbackActionIcon}))),u&&n.a.createElement(R.a,{size:"small",onClick:function(){s({feedbackId:t,collaboratorId:r})}},n.a.createElement($.a,{className:m.feedbackActionIcon}))))}ee.defaultProps={className:""};var ae=ee,te=t(179),re=t(170),ne=t(171),ce=t(185),oe=t(172),le=Object(d.a)((function(){return{feedbackMeesageInput:{resize:"none",width:"100%",fontSize:16,fontWeight:200}}}));var ie=function(e){var a=e.collaboratorName,t=e.open,c=e.onClose,o=e.onSubmit,l=le(),i=Object(r.useState)(""),s=Object(C.a)(i,2),m=s[0],u=s[1];function d(){u(""),c()}return n.a.createElement(te.a,{open:t,onClose:d},n.a.createElement(re.a,null,n.a.createElement(ne.a,null,"Escreva an\xf4nimamente sobre o(a) collaborador(a)"," ",a),n.a.createElement(ce.a,{autoFocus:!0,rowsMin:3,className:l.feedbackMeesageInput,margin:"dense",value:m,onChange:function(e){u(e.target.value)}})),n.a.createElement(oe.a,null,n.a.createElement(M.a,{onClick:function(){o(m)}},n.a.createElement(b.a,null,"SALVAR")),n.a.createElement(M.a,{onClick:d},n.a.createElement(b.a,null,"CANCELAR"))))},se=Object(d.a)((function(e){return{container:{width:"100vw",display:"flex",justifyContent:"center"},paper:{width:"50%",padding:20,margin:30,minHeight:350},loadingIndicatorWrapper:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},collaboratorIdentificationWrapper:{display:"flex",alignItems:"center"},arrowBackButton:{marginRight:e.spacing(1)},avatar:{width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(2)},collaboratorName:{fontSize:22,fontWeight:600},separator:{width:"100%",height:e.spacing(.2),backgroundColor:"#363636",marginTop:e.spacing(2),marginBottom:e.spacing(2)},collaboratorDetailsContainer:{display:"flex",alignItems:"center",justifyContent:"stretch"},collaboratorFeedbackContainer:{marginTop:20,display:"flex",flexDirection:"column",justifyContent:"space-between"},collaboratorFeedbackTitleWrapper:{display:"flex",alignItems:"center",marginBottom:10},collaboratorFeedbackTitle:{fontSize:19,fontWeight:600},collaboratorFeedbackListContainer:{display:"flex",alignItems:"stretch",flexDirection:"row",justifyContent:"stretch",flexWrap:"wrap"},collaboratorFeedbackItem:{flex:"0 46%",margin:"2%"}}})),me="LIKE",ue="ADD",de="REMOVE";var be=function(){var e,a=se(),t=Object(i.f)(),c=Object(i.h)().collaboratorId,o="collaborator/".concat(c),l="collaborator/".concat(c,"/feedback"),s=Object(r.useState)(!1),m=Object(C.a)(s,2),u=m[0],d=m[1],p=Object(r.useState)(null),g=Object(C.a)(p,2),h=g[0],I=g[1],O=x(o).data,y=x(l),w=y.data,D=y.mutate,S=Object(r.useRef)(null);function F(){d(!1)}function A(){I(null)}function P(e){return G.apply(this,arguments)}function G(){return(G=Object(E.a)(v.a.mark((function e(a){var t,r,n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.feedbackId,r=a.newLikesQuantity,n=w,e.prev=2,c=w.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{like:t===e.id?r:e.like})})),D(c,!1),Object(k.b)(l,c,!1),e.next=8,j.put("".concat(l,"/").concat(t),{like:r});case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),I(me),D(n,!1),Object(k.b)(l,n,!1);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function U(e){var a=e.feedbackId,t=w;try{var r=w.filter((function(e){return a!==e.id}));D(r,!1),Object(k.b)(l,r,!1),j.delete("collaborator/".concat(c,"/feedback/").concat(a))}catch(n){I(de),D(t,!1),Object(k.b)(l,t,!1)}}function q(){return(q=Object(E.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post(l,{collaboratorId:c,message:a,like:0,createdAt:B()().utc().format()});case 3:Object(k.b)(l),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),I(ue);case 9:return e.prev=9,F(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){switch(h){case ue:S.current="Houve um erro ao adicionar a sua mensagem";break;case me:S.current="Houve um erro ao registrar a aprova\xe7\xe3o desse coment\xe1rio";break;case de:S.current="Houve um erro ao remover esse coment\xe1rio";break;default:S.current=null}}),[h]),n.a.createElement("div",{className:a.container},n.a.createElement(ie,{open:u,collaboratorName:null!==(e=null===O||void 0===O?void 0:O.name)&&void 0!==e?e:"",onSubmit:function(e){return q.apply(this,arguments)},onClose:F}),n.a.createElement(z.a,{className:a.paper},O?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:a.collaboratorIdentificationWrapper},n.a.createElement(R.a,{className:a.arrowBackButton,onClick:function(){t.goBack()}},n.a.createElement(J.a,null)),n.a.createElement(W.a,{className:a.avatar,src:O.avatar}),n.a.createElement(b.a,{variant:"h1",className:a.collaboratorName},O.name)),n.a.createElement("div",{className:a.separator}),n.a.createElement("div",{className:a.collaboratorDetailsContainer},n.a.createElement(K,{label:"Empresa",value:O.company}),n.a.createElement(K,{label:"Cargo",value:O.role})),n.a.createElement("div",{className:a.collaboratorFeedbackContainer},n.a.createElement("div",{className:a.collaboratorFeedbackTitleWrapper},n.a.createElement(b.a,{variant:"h2",className:a.collaboratorFeedbackTitle},"Feedbacks"),n.a.createElement(T.a,{title:"Adicionar feedback"},n.a.createElement(M.a,{onClick:function(){d(!0)}},n.a.createElement(Q.a,null)))),O?n.a.createElement(N,{className:a.collaboratorFeedbackListContainer,perPage:20,items:w,keyExtractor:function(e){return e.item.id},renderItem:function(e){var t=e.item;return n.a.createElement(ae,{className:a.collaboratorFeedbackItem,id:t.id,collaboratorId:t.collaboratorId,createdAt:t.createdAt,like:t.like,message:t.message,onFeedbackLike:P,onFeedbackRemove:U})}}):n.a.createElement("div",{className:a.loadingIndicatorWrapper},n.a.createElement(f.a,null)))):n.a.createElement("div",{className:a.loadingIndicatorWrapper},n.a.createElement(f.a,null))),n.a.createElement(H.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!h,autoHideDuration:6e3,onClose:A},n.a.createElement(V.a,{severity:"error",onClose:A},S.current)))},pe=t(83),fe=Object(pe.a)({});var ge=function(){return n.a.createElement(l.a,null,n.a.createElement(s.a,null),n.a.createElement(m.a,{theme:fe},n.a.createElement(i.c,null,n.a.createElement(i.a,{exact:!0,path:"/",component:A}),n.a.createElement(i.a,{exact:!0,path:"/collaborators/:collaboratorId",component:be}))))};o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ge,null)),document.getElementById("root"))},93:function(e,a,t){e.exports=t(133)}},[[93,1,2]]]);
//# sourceMappingURL=main.320174ab.chunk.js.map